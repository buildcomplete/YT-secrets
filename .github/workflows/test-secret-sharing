# .github/workflows/app.yaml
name: PyTest
on: push

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v2
      - name: Build and export to Docker
        uses: docker/build-push-action@v2
        with:
          context: ./app/
          load: true
          tags: test-secret
      - name: Test
        run: |
          working-directory: app
          docker run -v ${GITHUB_WORKSPACE}/app:/App test-secret pytest